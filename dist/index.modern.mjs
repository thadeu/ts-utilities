function n(){return n=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},n.apply(this,arguments)}class t extends Error{constructor(n,t){super(n),this.statusCode=void 0,this.name="TryException",this.statusCode=t||400,Error.captureStackTrace(this,this.constructor)}}const r=n=>{var t;return"Function"===(null==n||null==(t=n.constructor)?void 0:t.name)},o=n=>{var t;return"AsyncFunction"===(null==n||null==(t=n.constructor)?void 0:t.name)},e=(n,t=null)=>o(n)||r(n)?n(t):n,u=n=>new Promise((t,r)=>setTimeout(t,n)),l=(n,...t)=>{const r=new Promise((t,r)=>{setTimeout(()=>r(`limit time excedded (${n} ms)`),n)});return Promise.race([r,...t])};function i(c,s){var a,d;const v=null!=(a=null==s?void 0:s.max)?a:0;let m=null!=(d=null==s?void 0:s.count)?d:0;try{var h;return o(c)?l(null!=(h=null==s?void 0:s.timeout)?h:9999,e(c)).catch(t=>m>=v?e(null==s?void 0:s.onError,t):(m++,null!=s&&s.onRetry&&s.onRetry(m,m>=v),i(c,n({},s,{count:m})))):(r(c),e(c))}catch(r){if(m>=v){if(null!=s&&s.strict)throw new t(r);return e(null==s?void 0:s.onError,r)}return m++,null!=s&&s.onRetry&&s.onRetry(m,m>=v),v>0?async function(t){return await u(1e3*(null!=(t=m**(null==s?void 0:s.exponential))?t:1.5)),i(c,n({},s,{count:m}))}():i(c,n({},s,{count:m}))}}export{i as Try,u as delay,o as isAsyncFunction,r as isFunction,l as race};
//# sourceMappingURL=index.modern.mjs.map
