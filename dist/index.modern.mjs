function n(){return n=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},n.apply(this,arguments)}class t extends Error{constructor(n,t){super(n),this.statusCode=void 0,this.name="TryException",this.statusCode=t||400,Error.captureStackTrace(this,this.constructor)}}const r=n=>{var t;return"Function"===(null==n||null==(t=n.constructor)?void 0:t.name)},o=n=>{var t;return"AsyncFunction"===(null==n||null==(t=n.constructor)?void 0:t.name)},e=n=>{var t;return"RegExp"===(null==(t=n.constructor)?void 0:t.name)},u=n=>"string"==typeof n&&n.trim(),l=(n,t=null)=>o(n)||r(n)?n(t):n,i=n=>new Promise((t,r)=>setTimeout(t,n)),c=(n,...t)=>{const r=new Promise((t,r)=>{setTimeout(()=>r(`limit time excedded (${n} ms)`),n)});return Promise.race([r,...t])};function s(e,u){var a,v;const d=null!=(a=null==u?void 0:u.max)?a:0;let m=null!=(v=null==u?void 0:u.count)?v:0;try{var p;return o(e)?c(null!=(p=null==u?void 0:u.timeout)?p:9999,l(e)).catch(t=>m>=d?l(null==u?void 0:u.onError,t):(m++,null!=u&&u.onRetry&&u.onRetry(m,m>=d),s(e,n({},u,{count:m})))):(r(e),l(e))}catch(r){if(m>=d){if(null!=u&&u.strict)throw new t(r);return l(null==u?void 0:u.onError,r)}return m++,null!=u&&u.onRetry&&u.onRetry(m,m>=d),d>0?async function(t){return await i(1e3*(null!=(t=m**(null==u?void 0:u.exponential))?t:1.5)),s(e,n({},u,{count:m}))}():s(e,n({},u,{count:m}))}}export{s as Try,i as delay,o as isAsyncFunction,r as isFunction,e as isPlainRegex,u as isPlainString,c as race};
//# sourceMappingURL=index.modern.mjs.map
