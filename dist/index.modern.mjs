function n(){return n=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},n.apply(this,arguments)}class t extends Error{constructor(n,t){super(n),this.statusCode=void 0,this.name="TryException",this.statusCode=t||400,Error.captureStackTrace(this,this.constructor)}}const r=n=>{var t;return"Function"===(null==n||null==(t=n.constructor)?void 0:t.name)},o=n=>{var t;return"AsyncFunction"===(null==n||null==(t=n.constructor)?void 0:t.name)},e=(n,t=null)=>o(n)||r(n)?n(t):n;function u(l,i){var c,s;const a=null!=(c=null==i?void 0:i.max)?c:0;let v=null!=(s=null==i?void 0:i.count)?s:0;try{var d;return o(l)?((n,...t)=>{const r=new Promise((t,r)=>{setTimeout(()=>r(`limit time excedded (${n} ms)`),n)});return Promise.race([r,...t])})(null!=(d=null==i?void 0:i.timeout)?d:9999,e(l)).catch(t=>v>=a?e(null==i?void 0:i.onError,t):(v++,null!=i&&i.onRetry&&i.onRetry(v,v>=a),u(l,n({},i,{count:v})))):(r(l),e(l))}catch(r){if(v>=a){if(null!=i&&i.strict)throw new t(r);return e(null==i?void 0:i.onError,r)}return v++,null!=i&&i.onRetry&&i.onRetry(v,v>=a),a>0?async function(t){var r;return await(r=1e3*(null!=(t=v**(null==i?void 0:i.exponential))?t:1.5),new Promise((n,t)=>setTimeout(n,r))),u(l,n({},i,{count:v}))}():u(l,n({},i,{count:v}))}}export{u as Try};
//# sourceMappingURL=index.modern.mjs.map
